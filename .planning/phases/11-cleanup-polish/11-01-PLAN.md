# Plan 11-01: Gap Closure Tasks

**Phase:** 11 - Cleanup & Polish
**Goal:** Close remaining implementation gaps from Technical Specifications review

## Context

Gap analysis comparing the 17 MODs Technical Specifications against implementation revealed 5 items needing attention:

1. **UI-06 (Two-column layouts)** - Mentioned but not fully implemented
2. **MOD-008 (SMS routing)** - Field exists but SMS integration needs verification
3. **EXP-05 (Staff deletion)** - Only soft delete, no hard delete
4. **RES-07 (iPad portrait)** - Needs verification/fixes
5. **CAL-01 (Timeline scrolling)** - Needs verification

## Tasks

### Task 1: Two-Column Form Layouts (CLN-01)

**Requirement:** UI-06 - Use 2-column layouts for form fields

**Files:**
- `src/components/orders/order-detail-modal.tsx`

**Actions:**
1. Identify form sections that can use 2-column grid
2. Apply `grid grid-cols-1 md:grid-cols-2 gap-4` to appropriate sections
3. Keep single-column on mobile, two-column on tablet+
4. Test that labels and inputs align properly

**Verification:**
```bash
# Check for grid layouts in order detail modal
grep -n "grid-cols-2" src/components/orders/order-detail-modal.tsx
```

---

### Task 2: Verify SMS Routing (CLN-02)

**Requirement:** MOD-008 - SMS should use mobile_phone field

**Files:**
- `src/lib/ghl.ts` (GoHighLevel integration)
- `src/lib/notifications.ts` or similar
- Any n8n webhook handlers

**Actions:**
1. Find SMS sending code
2. Verify it uses `mobile_phone` field (not `phone`)
3. If using GHL, verify field mapping
4. Document findings

**Verification:**
```bash
# Search for SMS-related code
grep -rn "mobile_phone\|sms\|SMS" src/lib/
grep -rn "mobile_phone" src/app/api/
```

---

### Task 3: Staff Hard Delete (CLN-03)

**Requirement:** EXP-05 - Team member management (add/remove)

**Files:**
- `src/app/api/admin/team/[id]/route.ts`
- `src/app/admin/team/page.tsx`

**Actions:**
1. Add DELETE method to team API route
2. Hard delete (not soft delete) staff record
3. Handle foreign key constraints (reassign or prevent if assigned)
4. Add delete button to team management UI
5. Confirm before deletion

**Verification:**
```bash
# Check for DELETE handler
grep -n "DELETE" src/app/api/admin/team/*/route.ts
```

---

### Task 4: iPad Portrait Verification (CLN-04)

**Requirement:** RES-07 - Fix iPad portrait layout

**Files:**
- Various page components
- `src/app/globals.css`

**Actions:**
1. Test all main pages in iPad portrait (768-1024px width)
2. Check for horizontal overflow
3. Fix any overflow issues with `overflow-x-hidden` or responsive adjustments
4. Verify touch targets remain 44px minimum

**Verification:**
- Manual testing in browser dev tools at 768px width
- No horizontal scrollbar should appear

---

### Task 5: Calendar Timeline Scroll (CLN-05)

**Requirement:** CAL-01 - Fix vertical scrolling in timeline calendar

**Files:**
- `src/app/calendar/page.tsx`
- Related calendar components

**Actions:**
1. Test calendar timeline scroll behavior
2. If issues found, add `overflow-y-auto` with appropriate max-height
3. Ensure smooth scroll on touch devices
4. Test with many items to verify performance

**Verification:**
- Manual testing: calendar should scroll smoothly with many items
- No layout jumps or glitches

---

## Completion Checklist

- [ ] Task 1: Two-column layouts applied to order forms
- [ ] Task 2: SMS routing verified (uses mobile_phone)
- [ ] Task 3: Staff hard delete endpoint working
- [ ] Task 4: iPad portrait has no horizontal overflow
- [ ] Task 5: Calendar timeline scrolls smoothly

## Notes

- Tasks 2, 4, 5 may be verification-only (already working)
- Task 3 requires new code
- Task 1 requires CSS changes

---
*Plan created: 2026-01-28*
