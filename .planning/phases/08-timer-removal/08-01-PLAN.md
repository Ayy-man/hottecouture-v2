---
phase: 08-timer-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/timer/timer-button.tsx (DELETE)
  - src/components/staff/active-task-indicator.tsx (DELETE)
  - src/components/staff/one-task-warning-modal.tsx (DELETE)
  - src/app/api/timer/start/route.ts (DELETE)
  - src/app/api/timer/stop/route.ts (DELETE)
  - src/app/api/timer/pause/route.ts (DELETE)
  - src/app/api/timer/resume/route.ts (DELETE)
  - src/app/api/timer/status/route.ts (DELETE)
  - src/app/api/timer/update/route.ts (DELETE)
  - src/app/api/cron/stale-timers/route.ts (DELETE)
  - src/lib/timer/timer-utils.ts (DELETE)
  - src/lib/hooks/useActiveTask.ts (DELETE)
  - tests/unit/timer-utils.test.ts (DELETE)
autonomous: true

must_haves:
  truths:
    - "No timer component files exist in codebase"
    - "No timer API routes exist"
    - "No timer utility files exist"
    - "No timer test files exist"
  artifacts:
    - path: "src/components/timer/"
      provides: "Empty or non-existent directory"
      exists: false
    - path: "src/app/api/timer/"
      provides: "Empty or non-existent directory"
      exists: false
    - path: "src/lib/timer/"
      provides: "Empty or non-existent directory"
      exists: false
  key_links:
    - from: "src/components/"
      to: "timer/"
      via: "Directory deletion"
      pattern: "Directory should not exist"
---

<objective>
Delete all timer-related files from the codebase (components, API routes, utilities, tests).

Purpose: Clean removal of stopwatch/timer feature per TMR-01 and TMR-02 requirements. This plan removes the source files; Plan 02 handles updating import statements.

Output: All timer-specific files deleted from the codebase.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-timer-removal/08-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete timer components and staff indicator files</name>
  <files>
    src/components/timer/timer-button.tsx
    src/components/staff/active-task-indicator.tsx
    src/components/staff/one-task-warning-modal.tsx
    src/components/timer/ (directory)
  </files>
  <action>
Delete the following files using rm:

1. Delete timer component:
   - `src/components/timer/timer-button.tsx` (540 lines - main stopwatch UI)
   - Remove the entire `src/components/timer/` directory after

2. Delete staff timer-related components:
   - `src/components/staff/active-task-indicator.tsx` (225 lines - header timer indicator)
   - `src/components/staff/one-task-warning-modal.tsx` (102 lines - conflict modal)

Do NOT delete these files in src/components/staff/ (they are unrelated to timer):
- staff-session-provider.tsx
- staff-pin-modal.tsx
- staff-pin-input.tsx
- staff-indicator.tsx
- index.ts (will be modified in Plan 02)

Verify each deletion completes successfully before proceeding.
  </action>
  <verify>
```bash
# These should all return "not found"
ls src/components/timer/timer-button.tsx
ls src/components/staff/active-task-indicator.tsx
ls src/components/staff/one-task-warning-modal.tsx
ls src/components/timer/

# These should still exist
ls src/components/staff/staff-indicator.tsx
ls src/components/staff/index.ts
```
  </verify>
  <done>Timer component directory deleted, active-task-indicator.tsx deleted, one-task-warning-modal.tsx deleted, while preserving other staff components.</done>
</task>

<task type="auto">
  <name>Task 2: Delete timer API routes and cron job</name>
  <files>
    src/app/api/timer/start/route.ts
    src/app/api/timer/stop/route.ts
    src/app/api/timer/pause/route.ts
    src/app/api/timer/resume/route.ts
    src/app/api/timer/status/route.ts
    src/app/api/timer/update/route.ts
    src/app/api/timer/ (directory)
    src/app/api/cron/stale-timers/route.ts
    src/app/api/cron/stale-timers/ (directory)
  </files>
  <action>
Delete all timer-related API routes:

1. Delete all 6 timer API route files:
   - `src/app/api/timer/start/route.ts`
   - `src/app/api/timer/stop/route.ts`
   - `src/app/api/timer/pause/route.ts`
   - `src/app/api/timer/resume/route.ts`
   - `src/app/api/timer/status/route.ts`
   - `src/app/api/timer/update/route.ts`

2. Remove the entire `src/app/api/timer/` directory after

3. Delete stale-timers cron job (no longer needed):
   - `src/app/api/cron/stale-timers/route.ts`
   - Remove the `src/app/api/cron/stale-timers/` directory after

Check if src/app/api/cron/ has other files - only remove stale-timers subdirectory, preserve other cron jobs if any.
  </action>
  <verify>
```bash
# Timer API directory should not exist
ls src/app/api/timer/

# Stale-timers cron should not exist
ls src/app/api/cron/stale-timers/

# Other API routes should still work
ls src/app/api/garment/
ls src/app/api/orders/
```
  </verify>
  <done>All 6 timer API routes deleted, timer directory removed, stale-timers cron job deleted.</done>
</task>

<task type="auto">
  <name>Task 3: Delete timer utilities and tests</name>
  <files>
    src/lib/timer/timer-utils.ts
    src/lib/timer/ (directory)
    src/lib/hooks/useActiveTask.ts
    tests/unit/timer-utils.test.ts
  </files>
  <action>
Delete timer utility files and tests:

1. Delete timer utilities:
   - `src/lib/timer/timer-utils.ts` (76 lines - formatTime, getTimerState functions)
   - Remove the entire `src/lib/timer/` directory after

2. Delete timer hook:
   - `src/lib/hooks/useActiveTask.ts` (73 lines - hook for active task tracking)

   Do NOT delete other hooks in src/lib/hooks/:
   - useCurrentStaff.ts
   - useRealtimeOrders.ts
   - useStaff.ts
   - useViewPreference.ts

3. Delete timer test file:
   - `tests/unit/timer-utils.test.ts` (191 lines)

   Do NOT delete other test files (e.g., pricing.test.ts)
  </action>
  <verify>
```bash
# Timer lib directory should not exist
ls src/lib/timer/

# useActiveTask should not exist but other hooks should
ls src/lib/hooks/useActiveTask.ts
ls src/lib/hooks/useStaff.ts

# Timer test should not exist but pricing test should
ls tests/unit/timer-utils.test.ts
ls tests/unit/pricing.test.ts
```
  </verify>
  <done>Timer utilities deleted, timer directory removed, useActiveTask hook deleted, timer-utils.test.ts deleted. Other hooks and tests preserved.</done>
</task>

</tasks>

<verification>
After all deletions complete:

```bash
# Comprehensive check - all these should fail/not exist
find src -name "*timer*" -type f
find src -name "*active-task*" -type f
find src -name "*one-task-warning*" -type f
find tests -name "*timer*" -type f

# These directories should not exist
ls src/components/timer/
ls src/app/api/timer/
ls src/lib/timer/
ls src/app/api/cron/stale-timers/

# Build will fail at this point (expected - Plan 02 fixes imports)
# Do NOT run npm run build yet
```
</verification>

<success_criteria>
1. No files matching *timer* pattern exist in src/ or tests/
2. src/components/timer/ directory does not exist
3. src/app/api/timer/ directory does not exist
4. src/lib/timer/ directory does not exist
5. src/lib/hooks/useActiveTask.ts does not exist
6. src/components/staff/active-task-indicator.tsx does not exist
7. src/components/staff/one-task-warning-modal.tsx does not exist
8. tests/unit/timer-utils.test.ts does not exist
9. src/app/api/cron/stale-timers/ does not exist
</success_criteria>

<output>
After completion, create `.planning/phases/08-timer-removal/08-01-SUMMARY.md`
</output>
