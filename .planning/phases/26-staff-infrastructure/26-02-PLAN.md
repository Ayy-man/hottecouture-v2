---
phase: 26-staff-infrastructure
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: false

user_setup:
  - service: twilio
    why: "A2P 10DLC SMS registration for business phone number"
    env_vars: []
    dashboard_config:
      - task: "Register brand in Twilio Console"
        location: "Twilio Console -> Messaging -> Trust Hub -> A2P Brands"
      - task: "Register campaign for SMS use case"
        location: "Twilio Console -> Messaging -> Trust Hub -> A2P Campaigns"
      - task: "Purchase or assign A2P phone number"
        location: "Twilio Console -> Phone Numbers"
      - task: "Update N8N workflow with new A2P phone number"
        location: "N8N workflow editor -> SMS send node"
  - service: stripe-via-ghl
    why: "Payment processing through GoHighLevel invoicing"
    env_vars: []
    dashboard_config:
      - task: "Connect Stripe account in GHL"
        location: "GoHighLevel -> Settings -> Payments -> Stripe"
      - task: "Test payment flow with test invoice"
        location: "GoHighLevel -> Payments -> Create Test Invoice"
  - service: vercel-domain
    why: "Custom domain connection"
    env_vars: []
    dashboard_config:
      - task: "Add custom domain in Vercel"
        location: "Vercel Dashboard -> Project Settings -> Domains"
      - task: "Configure DNS at registrar"
        location: "Domain registrar dashboard (Namecheap/GoDaddy/Cloudflare)"

must_haves:
  truths:
    - "SMS sends from a registered A2P business phone number (not personal cell)"
    - "Stripe is connected in GoHighLevel and can process payments"
    - "Custom domain resolves to the Vercel-hosted app with SSL"
  artifacts: []
  key_links: []
---

<objective>
Complete external service configuration for SMS A2P registration, Stripe connection via GoHighLevel, and custom domain setup.

Purpose: These three items require dashboard configuration in external services that Claude cannot access. The client/developer must complete these manually with the guidance provided.

Output: Working SMS from business number, Stripe payment processing via GHL, custom domain with SSL.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-staff-infrastructure/26-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Register A2P SMS business phone number</name>
  <action>
The app uses N8N workflows for SMS sending (external to the Next.js app). To comply with US A2P 10DLC requirements and get a proper business SMS number:

**Prerequisites (gather before starting):**
- Business name, address, website
- Business EIN (or sole proprietor details)
- Expected monthly SMS volume estimate
- Sample SMS message templates (order confirmations, notifications)

**Steps:**

1. **Identify SMS provider:** Check N8N workflow configuration to confirm whether Twilio, Bandwidth, or another provider is used for SMS sending.

2. **If Twilio:**
   a. Log into Twilio Console
   b. Go to Messaging -> Trust Hub -> A2P Brand Registration
   c. Submit business information (name, EIN, address, website)
   d. Wait for brand approval (minutes to hours)
   e. Create A2P Campaign under the approved brand
   f. Select use case: "Transactional" (order notifications, appointment reminders)
   g. Provide sample message templates
   h. Submit campaign for approval (10-15 business day wait)
   i. Once approved, purchase or assign a phone number to the campaign
   j. Update N8N workflow SMS node with the new A2P number

3. **If different provider:** Follow that provider's A2P registration process (similar steps).

**IMPORTANT:** A2P campaign approval takes 10-15 business days. Brand registration is fast (minutes). Start this process immediately to avoid delays.
  </action>
  <verify>
    - SMS sent from new A2P number is received on a test phone
    - Twilio (or provider) dashboard shows campaign status as "Approved"
    - N8N workflow uses the registered A2P phone number
  </verify>
  <done>
    - A2P brand registered and approved
    - Campaign registered and approved
    - SMS sends from registered business number
    - N8N workflow updated with A2P number
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Connect Stripe to GoHighLevel</name>
  <action>
The app uses GoHighLevel (GHL) for invoicing. Stripe processes payments behind GHL. This is dashboard configuration, not code.

**Steps:**

1. **Check current status:**
   a. Log into GoHighLevel dashboard
   b. Go to Settings -> Payments (or Business Profile -> Integrations)
   c. Check if Stripe is already connected
   d. If connected with green checkmark: skip to step 3 (just verify)

2. **If not connected:**
   a. Click "Connect Stripe" in GHL Payments settings
   b. Log into Stripe account (or create one if needed)
   c. Authorize GHL to access Stripe account
   d. Verify connection shows green/active status

3. **Verify payment flow:**
   a. Create a test invoice in GHL
   b. Send to a test email/phone
   c. Complete payment with Stripe test card (4242 4242 4242 4242)
   d. Verify payment appears in both GHL and Stripe dashboards
   e. Verify webhook updates order status in the app (if applicable)

4. **Verify GHL Business Profile branding:**
   a. Check Business Profile has correct logo
   b. Check phone number is shop number (514-667-0082), not personal cell
   c. Check business name shows "Hotte Couture"

**NOTE:** If Stripe is already connected in GHL but payments aren't working, the issue is likely in GHL configuration (webhook URLs, payment pages), not in the app code.
  </action>
  <verify>
    - GHL Settings -> Payments shows Stripe connected (green status)
    - Test invoice payment completes successfully
    - Payment appears in Stripe dashboard
  </verify>
  <done>
    - Stripe connected and active in GoHighLevel
    - Test payment processed successfully
    - Business branding correct on payment pages
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 3: Connect custom domain to Vercel</name>
  <action>
The app is deployed on Vercel and needs a custom domain.

**Prerequisites:**
- Know the desired domain name (e.g., hottecouture.com)
- Have access to the domain registrar dashboard
- Have access to Vercel project settings

**Steps:**

1. **Add domain in Vercel:**
   a. Go to Vercel Dashboard -> Select project
   b. Go to Settings -> Domains
   c. Enter the custom domain name
   d. Click "Add"

2. **Configure DNS (choose one method):**

   **Option A — Vercel Nameservers (recommended, simplest):**
   a. Vercel shows nameserver addresses: `ns1.vercel-dns.com` and `ns2.vercel-dns.com`
   b. Go to domain registrar dashboard
   c. Find nameserver settings
   d. Replace existing nameservers with Vercel's two nameservers
   e. Save changes
   f. Wait 5-60 minutes for propagation

   **Option B — Keep existing DNS provider:**
   a. Vercel shows required DNS records
   b. For apex domain (example.com): Add A record pointing to Vercel's IP (shown in dashboard)
   c. For www subdomain: Add CNAME record pointing to `cname.vercel-dns.com`
   d. For verification: Add TXT record (shown in dashboard)
   e. Save changes at registrar
   f. Wait 5 minutes to 48 hours for propagation

3. **Verify:**
   a. Vercel Domains page shows green checkmark
   b. SSL certificate auto-issues (1-5 minutes after DNS verification)
   c. Visit the domain in browser — app loads
   d. Check HTTPS padlock icon in browser

4. **Update environment variables (if needed):**
   a. In Vercel project settings -> Environment Variables
   b. Update NEXT_PUBLIC_APP_URL to the custom domain URL
   c. Redeploy for the change to take effect

**DNS Propagation Check:** Use https://www.whatsmydns.net to monitor global DNS propagation.
  </action>
  <verify>
    - Custom domain resolves to the app in browser
    - HTTPS certificate is valid (green padlock)
    - Vercel Domains page shows verified status
  </verify>
  <done>
    - Custom domain points to the Vercel-hosted app
    - SSL certificate active and auto-renewing
    - App accessible via custom domain with HTTPS
  </done>
</task>

</tasks>

<verification>
1. SMS: Test message received from A2P business number
2. Stripe: Test payment processed through GHL -> Stripe pipeline
3. Domain: Custom domain loads app with valid SSL certificate
</verification>

<success_criteria>
- SMS sends from registered A2P business number
- Stripe connected in GHL and processing test payments
- Custom domain resolves to app with HTTPS
- All three services operational and verified
</success_criteria>

<output>
After completion, create `.planning/phases/26-staff-infrastructure/26-02-SUMMARY.md`
</output>
