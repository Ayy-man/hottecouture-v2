---
phase: 24-board-kanban-ui
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/gantt.tsx
  - src/components/ui/tooltip.tsx
  - src/app/board/workload/page.tsx
autonomous: true

must_haves:
  truths:
    - "Gantt bar left and right edges are draggable to extend or shrink task duration"
    - "Hovering a workload item shows tooltip with order number, service name, estimated time, and due date"
  artifacts:
    - path: "src/components/ui/gantt.tsx"
      provides: "Wider drag handles (w-4) for Gantt bar resize"
      contains: "w-4 cursor-ew-resize"
    - path: "src/components/ui/tooltip.tsx"
      provides: "Reusable Radix UI Tooltip wrapper component"
      contains: "TooltipProvider"
    - path: "src/app/board/workload/page.tsx"
      provides: "Tooltip wrappers on workload items showing order/service details"
      contains: "TooltipProvider"
  key_links:
    - from: "src/app/board/workload/page.tsx"
      to: "src/components/ui/tooltip.tsx"
      via: "import { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }"
      pattern: "from.*@/components/ui/tooltip"
    - from: "src/components/ui/gantt.tsx"
      to: "drag handlers"
      via: "onMouseDown handleDragStart on wider handles"
      pattern: "w-4.*cursor-ew-resize"
---

<objective>
Fix Gantt chart drag-to-extend by increasing handle width, and add hover tooltips to workload page items showing order/service details.

Purpose: Gantt drag handles are only 8px wide (w-2) making them nearly impossible to grab. Workload items show minimal info and need hover details for quick inspection.
Output: Usable Gantt bar resizing and informative workload tooltips.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/ui/gantt.tsx
@src/app/board/workload/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Widen Gantt drag handles and create tooltip component</name>
  <files>
    src/components/ui/gantt.tsx
    src/components/ui/tooltip.tsx
  </files>
  <action>
**Part A — Gantt drag handles (gantt.tsx)**

The GanttFeatureItem component (starting around line 437) has left and right resize handles at `w-2` (8px). This is too narrow to grab reliably on both mouse and touch devices.

Find the left drag handle div (around line 658-664). Change `w-2` to `w-4` and make the default background transparent so they don't clutter small bars visually:

Before:
```
className="absolute left-0 top-0 bottom-0 w-2 cursor-ew-resize bg-black/10 hover:bg-black/20 active:bg-black/30 rounded-l-md"
```
After:
```
className="absolute left-0 top-0 bottom-0 w-4 cursor-ew-resize bg-black/0 hover:bg-black/20 active:bg-black/30 rounded-l-md transition-colors z-10"
```

Find the right drag handle div (around line 674-680). Apply the same change:

Before:
```
className="absolute right-0 top-0 bottom-0 w-2 cursor-ew-resize bg-black/10 hover:bg-black/20 active:bg-black/30 rounded-r-md"
```
After:
```
className="absolute right-0 top-0 bottom-0 w-4 cursor-ew-resize bg-black/0 hover:bg-black/20 active:bg-black/30 rounded-r-md transition-colors z-10"
```

Changes made:
- `w-2` -> `w-4`: 8px -> 16px grab area
- `bg-black/10` -> `bg-black/0`: Transparent by default (less visual noise)
- Added `transition-colors`: Smooth hover appearance
- Added `z-10`: Ensures handles sit above body text for click/touch targeting

Do NOT change the event handlers, the body drag zone span, or the 500ms long-press logic. Do NOT change dayWidth calculation.

**Part B — Tooltip component (tooltip.tsx)**

Install dependency:
```bash
npm install @radix-ui/react-tooltip
```

Create `src/components/ui/tooltip.tsx` following the shadcn/ui pattern used by existing Radix components in this project:

```tsx
'use client';

import * as React from 'react';
import * as TooltipPrimitive from '@radix-ui/react-tooltip';
import { cn } from '@/lib/utils';

const TooltipProvider = TooltipPrimitive.Provider;
const Tooltip = TooltipPrimitive.Root;
const TooltipTrigger = TooltipPrimitive.Trigger;

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Portal>
    <TooltipPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        'z-50 overflow-hidden rounded-md bg-popover px-3 py-2 text-sm text-popover-foreground shadow-md border border-border animate-in fade-in-0 zoom-in-95',
        className
      )}
      {...props}
    />
  </TooltipPrimitive.Portal>
));
TooltipContent.displayName = TooltipPrimitive.Content.displayName;

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };
```
  </action>
  <verify>
1. Run `npm install @radix-ui/react-tooltip` successfully
2. Run `npx tsc --noEmit` to confirm no TypeScript errors
3. Verify `w-4` appears in both left and right Gantt drag handle divs
4. Verify tooltip.tsx exports TooltipProvider, Tooltip, TooltipTrigger, TooltipContent
  </verify>
  <done>
Gantt drag handles are 16px wide (w-4) with transparent default, darkening on hover. Tooltip component created at src/components/ui/tooltip.tsx.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add hover tooltips to workload page unassigned items</name>
  <files>src/app/board/workload/page.tsx</files>
  <action>
**Step 1 — Add import** at the top of the file (after the existing OrderDetailModal import around line 21):
```tsx
import { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider } from '@/components/ui/tooltip';
```

**Step 2 — Wrap page content in TooltipProvider:**
In the main return statement (around line 485, the non-loading return), wrap the outermost content div:

Before:
```tsx
<AuthGuard>
  <div className="h-full flex flex-col overflow-hidden bg-gradient-to-br from-amber-50 to-orange-50">
```
After:
```tsx
<AuthGuard>
  <TooltipProvider delayDuration={300}>
  <div className="h-full flex flex-col overflow-hidden bg-gradient-to-br from-amber-50 to-orange-50">
```

Close `</TooltipProvider>` just before `</AuthGuard>` at the end of the return (around line 723).

**Step 3 — Add tooltips to unassigned items:**
Find the unassigned items loop (around line 582):
```tsx
{sortedUnassignedItems.slice(0, 8).map(item => (
  <div key={item.garmentServiceId} className="flex items-center justify-between gap-2 text-xs bg-white p-1.5 rounded border border-amber-200">
```

Wrap each item div with Tooltip/TooltipTrigger/TooltipContent. Move `key` from inner div to `<Tooltip>`:

```tsx
{sortedUnassignedItems.slice(0, 8).map(item => (
  <Tooltip key={item.garmentServiceId}>
    <TooltipTrigger asChild>
      <div className="flex items-center justify-between gap-2 text-xs bg-white p-1.5 rounded border border-amber-200">
        {/* ALL existing inner content stays exactly the same */}
      </div>
    </TooltipTrigger>
    <TooltipContent side="top" className="max-w-xs">
      <div className="space-y-1">
        <div className="font-semibold">Commande #{item.orderNumber}</div>
        <div className="text-xs">{item.serviceName}</div>
        {item.estimatedMinutes != null && (
          <div className="text-xs text-muted-foreground">
            Temps estimé: {item.estimatedMinutes} min
          </div>
        )}
        {item.dueDate && (
          <div className="text-xs text-amber-600">
            Échéance: {format(new Date(item.dueDate), 'dd MMM yyyy')}
          </div>
        )}
      </div>
    </TooltipContent>
  </Tooltip>
))}
```

**Step 4 — Check data field availability:**
Look at the item type interface. The workload items have at minimum: `garmentServiceId`, `orderNumber`, `serviceName`, `dueDate`. Check if `estimatedMinutes`, `clientName`, `garmentType` exist. Use only fields that are definitely available. If a field is optional or may not exist, wrap it with a null check (`!= null` or `&&`).

Use French labels in tooltip: "Commande #", "Temps estimé", "Échéance" (matching the app's French-first convention from Phase 22 decisions).

Do NOT wrap the staff member summary cards with tooltips (those show aggregate data).
Do NOT add tooltips to the header, gauge charts, or export buttons.
  </action>
  <verify>
1. Run `npx tsc --noEmit` to confirm no TypeScript errors
2. Verify TooltipProvider wraps the workload page content
3. Verify each unassigned item in the map has a Tooltip wrapper
4. Verify TooltipContent shows order number, service name, time estimate, and due date
5. Verify all data field references match the actual item type (no undefined property access)
  </verify>
  <done>
Hovering over unassigned workload items shows tooltip with order number, service name, estimated time, and due date. Tooltip uses Radix UI for accessibility and consistent styling.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors
2. `npm ls @radix-ui/react-tooltip` shows the package installed
3. Gantt drag handles are w-4 (16px) with transparent default and hover darkening
4. tooltip.tsx exists at src/components/ui/tooltip.tsx with proper exports
5. Workload page has TooltipProvider wrapper and Tooltip on unassigned items
6. No changes to Gantt drag logic or workload item assignment functionality
</verification>

<success_criteria>
- Gantt bar left/right edges are 16px wide (w-4) for reliable drag-to-extend
- Gantt handles show visual feedback on hover (transparent to dark overlay)
- Hovering workload unassigned items shows tooltip with order/service details
- Tooltip shows: Commande #, service name, estimated time, due date (in French)
- @radix-ui/react-tooltip installed and tooltip.tsx component available
- No TypeScript compilation errors
- No regressions to Gantt drag, workload assignments, or page layout
</success_criteria>

<output>
After completion, create `.planning/phases/24-board-kanban-ui/24-02-SUMMARY.md`
</output>
