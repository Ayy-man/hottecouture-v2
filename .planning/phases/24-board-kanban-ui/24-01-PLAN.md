---
phase: 24-board-kanban-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/rush-orders/rush-indicator.tsx
  - src/app/board/page.tsx
autonomous: true

must_haves:
  truths:
    - "All kanban cards display consistent rounded corners with no boxy appearance"
    - "Rush badge ribbon is visually contained within card boundaries"
    - "Page scrolls normally when cursor/finger is over the filter header area"
  artifacts:
    - path: "src/components/rush-orders/rush-indicator.tsx"
      provides: "RushOrderCard with overflow-hidden containment"
      contains: "overflow-hidden"
    - path: "src/app/board/page.tsx"
      provides: "Board layout with sticky header allowing scroll from anywhere"
      contains: "sticky top-0"
  key_links:
    - from: "src/components/board/draggable-order-card.tsx"
      to: "src/components/rush-orders/rush-indicator.tsx"
      via: "RushOrderCard wrapper"
      pattern: "RushOrderCard"
    - from: "src/app/board/page.tsx"
      to: "scroll container"
      via: "overflow-y-auto on flex-col parent, sticky header"
      pattern: "overflow-y-auto"
---

<objective>
Fix kanban card visual polish and scroll blocking: add overflow-hidden to RushOrderCard for consistent rounded corners and rush badge containment, and restructure board layout so scrolling works from anywhere on the page (including over the header/filter area).

Purpose: Cards currently look boxy despite having rounded-lg, the rush ribbon bleeds outside card boundaries, and users cannot scroll when their cursor is over the header/filters.
Output: Polished kanban cards with proper corner rounding, contained rush badges, and unblocked scroll everywhere.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/rush-orders/rush-indicator.tsx
@src/components/board/draggable-order-card.tsx
@src/app/board/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix rounded corners and rush badge overflow in RushOrderCard</name>
  <files>src/components/rush-orders/rush-indicator.tsx</files>
  <action>
In `RushOrderCard` component (line 120), the outer `<div>` has `className="relative rounded-lg ${className}"` but lacks `overflow-hidden`. This causes two issues:
- The inner bordered div's content is not clipped to the outer container's rounded corners
- The RushRibbon (absolute positioned with `translate-x-2 -translate-y-1` and `rotate-45`) overflows outside the card boundary

Fix: Add `overflow-hidden` to the outer div's className on line 120.

Change:
```tsx
<div className={`relative rounded-lg ${className}`}>
```
to:
```tsx
<div className={`relative rounded-lg overflow-hidden ${className}`}>
```

This single change fixes BOTH issues:
1. **Rounded corners**: `overflow-hidden` creates a clipping context that enforces the border-radius visually
2. **Rush badge containment**: The rotated/translated RushRibbon gets clipped to the card boundary

Do NOT modify the RushRibbon component positioning (translate-x-2, -translate-y-1, rotate-45). Do NOT change the inner bordered div's classes. Do NOT add z-index changes.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no TypeScript errors. Verify that the outer div in RushOrderCard now has `relative rounded-lg overflow-hidden` in the class string.
  </verify>
  <done>
RushOrderCard outer div has `overflow-hidden` class. Rush ribbon clipped to card bounds. Card corners appear consistently rounded.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix scroll blocking on board filter header area</name>
  <files>src/app/board/page.tsx</files>
  <action>
The board page layout has this structure:
```
div.h-full.bg-background.overflow-hidden (line 342)
  MuralBackground
    div.flex.flex-col.h-full.relative.z-10 (line 344)
      header.flex-none (line 346) — blocks scroll events
      main.flex-1.overflow-y-auto (line 444) — scrollable content
```

When the cursor is over the header (a non-scrollable flex-none sibling), scroll wheel events do not reach the `overflow-y-auto` main area because they are separate siblings. The fix: move the scroll container to the flex-col parent and make the header sticky.

**Step 1** — Line 344: Add `overflow-y-auto` to the flex-col wrapper.
Change:
```tsx
<div className='flex flex-col h-full relative z-10'>
```
to:
```tsx
<div className='flex flex-col h-full relative z-10 overflow-y-auto'>
```

**Step 2** — Line 346: Make header sticky so it pins at top when scrolling.
Change:
```tsx
<header className='bg-white/80 backdrop-blur-md border-b border-border px-4 sm:px-6 py-4 shadow-sm flex-none'>
```
to:
```tsx
<header className='sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-border px-4 sm:px-6 py-4 shadow-sm'>
```
(Note: removed `flex-none` since sticky positioning handles the non-scrolling behavior, and added `sticky top-0 z-20`)

**Step 3** — Line 444: Remove `overflow-y-auto` from main since the parent now handles scrolling.
Change:
```tsx
<main className='flex-1 overflow-y-auto relative'>
```
to:
```tsx
<main className='flex-1 relative'>
```

This restructure means the entire flex-col container scrolls as one unit. The header stays pinned at the top via `sticky`. The `backdrop-blur-md` on the header provides visual separation when content scrolls behind it.

Do NOT change the outer `overflow-hidden` on line 342 (needed for layout containment in the root grid). Do NOT use pointer-events-none (too fragile with nested dropdowns).
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no TypeScript errors. Verify:
1. The flex-col wrapper div has `overflow-y-auto`
2. The header has `sticky top-0 z-20`
3. The main element no longer has `overflow-y-auto`
4. All header buttons, filters, and dropdowns remain accessible (no pointer-events issues)
  </verify>
  <done>
Scrolling works regardless of cursor position on the board page. Header stays pinned at top. All interactive elements in header remain functional.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors
2. RushOrderCard in rush-indicator.tsx has `overflow-hidden` in outer div className
3. Board page flex-col wrapper has `overflow-y-auto`
4. Board page header has `sticky top-0 z-20`
5. Board page main element has NO `overflow-y-auto`
6. Kanban cards, drag-and-drop, and filter dropdowns all work correctly
</verification>

<success_criteria>
- Kanban cards display consistent rounded corners (overflow-hidden clips content to border-radius)
- Rush badge ribbon is clipped within card boundaries (no visual bleeding)
- Page scrolls normally when cursor is over the filter header area (sticky header pattern)
- No TypeScript compilation errors
- No visual regressions to card layout, drag-and-drop, or filter dropdowns
</success_criteria>

<output>
After completion, create `.planning/phases/24-board-kanban-ui/24-01-SUMMARY.md`
</output>
