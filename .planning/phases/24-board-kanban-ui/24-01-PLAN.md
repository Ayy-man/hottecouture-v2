---
phase: 24-board-kanban-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/rush-orders/rush-indicator.tsx
  - src/app/board/page.tsx
autonomous: true

must_haves:
  truths:
    - "All kanban cards display consistent rounded corners with no boxy appearance"
    - "Rush badge ribbon is visually contained within card boundaries"
    - "Page scrolls normally when cursor/finger is over the filter header area"
  artifacts:
    - path: "src/components/rush-orders/rush-indicator.tsx"
      provides: "RushOrderCard with overflow-hidden containment"
      contains: "overflow-hidden"
    - path: "src/app/board/page.tsx"
      provides: "Board header that does not block scroll propagation"
  key_links:
    - from: "src/components/board/draggable-order-card.tsx"
      to: "src/components/rush-orders/rush-indicator.tsx"
      via: "RushOrderCard wrapper"
      pattern: "RushOrderCard"
    - from: "src/app/board/page.tsx"
      to: "scroll propagation"
      via: "CSS overflow and pointer-events on header"
      pattern: "flex-none.*header"
---

<objective>
Fix kanban card visual polish: add overflow-hidden to RushOrderCard for consistent rounded corners and rush badge containment, and fix scroll blocking when cursor is over the board filter area.

Purpose: Cards currently look boxy despite having rounded-lg, and the rush ribbon bleeds outside card boundaries. Filter header area may block page scroll events.
Output: Polished kanban cards with proper corner rounding, contained rush badges, and unblocked scroll in filter area.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/rush-orders/rush-indicator.tsx
@src/components/board/draggable-order-card.tsx
@src/app/board/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix rounded corners and rush badge overflow in RushOrderCard</name>
  <files>src/components/rush-orders/rush-indicator.tsx</files>
  <action>
In `RushOrderCard` component (line 120), the outer `<div>` has `className="relative rounded-lg ${className}"` but lacks `overflow-hidden`. This means:
- The inner bordered div's corners render properly but the outer container doesn't clip child content
- The RushRibbon (absolute positioned with `translate-x-2 -translate-y-1` and `rotate-45`) overflows outside the parent bounds

Fix: Add `overflow-hidden` to the outer div's className in RushOrderCard:

Change line 120 from:
```
<div className={`relative rounded-lg ${className}`}>
```
to:
```
<div className={`relative rounded-lg overflow-hidden ${className}`}>
```

This single change fixes BOTH issues:
1. **Rounded corners**: `overflow-hidden` creates a clipping context that enforces the border-radius visually, making corners crisp
2. **Rush badge containment**: The rotated/translated RushRibbon gets clipped to the card boundary

Do NOT modify the RushRibbon component positioning (translate-x-2, -translate-y-1, rotate-45) — the overflow-hidden on the parent handles containment. Do NOT add z-index changes.

Verify the inner bordered div still has its own `rounded-lg` for the border to render with rounded corners.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no TypeScript errors. Visually inspect that RushOrderCard outer div now has `relative rounded-lg overflow-hidden` in the class string.
  </verify>
  <done>
RushOrderCard outer div has `overflow-hidden` class. Rush ribbon clipped to card bounds. Card corners appear consistently rounded.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix scroll blocking on board filter header area</name>
  <files>src/app/board/page.tsx</files>
  <action>
The board page header (line 346) uses `flex-none` which is correct. The main area (line 444) uses `flex-1 overflow-y-auto` which is also correct. However, the header itself may block scroll event propagation because:

1. The header has `backdrop-blur-md` which creates a new stacking context
2. Radix DropdownMenu components inside the header may capture pointer events when closed

Investigate and apply these fixes:

**Fix A — Ensure header doesn't capture scroll events:**
The header (line 346) has `bg-white/80 backdrop-blur-md border-b border-border px-4 sm:px-6 py-4 shadow-sm flex-none`. This is a flex-none element inside a flex-col container, so scroll events on the header area should propagate to the parent. The issue is that the entire `<div className='h-full bg-background overflow-hidden'>` on line 342 has `overflow-hidden` which prevents any scroll.

Check: The outer wrapper `<div className='h-full bg-background overflow-hidden'>` (line 342) should keep `overflow-hidden` since scroll happens in `<main className='flex-1 overflow-y-auto relative'>` (line 444). But if the user's cursor is on the header and they scroll, the scroll event should bubble to the nearest scrollable ancestor (the main area below it, or the browser should let it pass through).

**The real fix:** The scroll blocking issue occurs because when the cursor is over the header (a non-scrollable flex-none area), scroll events don't reach the `overflow-y-auto` main area since they're separate siblings. The user expects that scrolling anywhere on the page should scroll the main content.

Apply this fix: On the outer `<div className='flex flex-col h-full relative z-10'>` (line 344), add `overflow-y-auto` and remove `overflow-y-auto` from the `<main>` element (line 444). This way, the entire column container scrolls as one unit, and the header stays fixed at top using `sticky top-0 z-20`:

1. Line 344: Change `<div className='flex flex-col h-full relative z-10'>` to `<div className='flex flex-col h-full relative z-10 overflow-y-auto'>`
2. Line 346: Add `sticky top-0 z-20` to the header className: `<header className='sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-border px-4 sm:px-6 py-4 shadow-sm flex-none'>`
3. Line 444: Change `<main className='flex-1 overflow-y-auto relative'>` to `<main className='flex-1 relative'>` (remove overflow-y-auto since parent now handles scroll)

This pattern keeps the header pinned while allowing scroll from anywhere on the page. The `backdrop-blur-md` on the header already provides visual separation when content scrolls behind it.

Do NOT change the outer `overflow-hidden` on line 342 (needed for layout containment).
Do NOT disable scroll globally or add pointer-events-none to the header.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no TypeScript errors. Verify that:
1. The outer flex-col div has `overflow-y-auto`
2. The header has `sticky top-0 z-20`
3. The main element no longer has `overflow-y-auto`
  </verify>
  <done>
Scrolling the page works regardless of whether cursor/finger is over the header/filter area or the main content area. Header stays pinned at top.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors
2. RushOrderCard in rush-indicator.tsx has `overflow-hidden` in outer div className
3. Board page header has `sticky top-0 z-20` classes
4. Board page scroll container is on the flex-col parent, not on main
5. No changes to RushRibbon positioning or z-index values
</verification>

<success_criteria>
- Kanban cards display consistent rounded corners (overflow-hidden clips content to border-radius)
- Rush badge ribbon is clipped within card boundaries (no visual bleeding)
- Page scrolls normally when cursor is over the filter header area (sticky header pattern)
- No TypeScript compilation errors
- No visual regressions to card layout, drag-and-drop, or filter dropdowns
</success_criteria>

<output>
After completion, create `.planning/phases/24-board-kanban-ui/24-01-SUMMARY.md`
</output>
