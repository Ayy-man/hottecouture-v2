---
phase: 22-audit-gap-closure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/board/page.tsx
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Board page scrolls vertically on all devices"
    - "Order detail modal content fully visible (no bottom cutoff)"
    - "Kanban drag-and-drop smooth on mobile (no parent scroll conflict)"
    - "No floating chatbot button visible on any page"
    - "Board page headers display in French"
  artifacts:
    - path: "src/app/board/page.tsx"
      provides: "Board page with correct h-full overflow pattern and French strings"
      contains: "h-full"
    - path: "src/app/layout.tsx"
      provides: "Layout without visible chatbot widget"
      contains: "hidden"
  key_links:
    - from: "src/app/board/page.tsx"
      to: "src/app/layout.tsx"
      via: "Grid child fills parent cell with h-full"
      pattern: "h-full.*bg-background"
---

<objective>
Fix board page scroll/overflow bugs, remove chatbot widget, and translate board headers to French.

Purpose: Resolve 4 critical CSS layout bugs (BUG-1/2/3/4) and 1 missing feature (FEAT-3) identified in milestone audit. The board page uses `h-screen overflow-hidden` instead of the established `h-full` pattern, causing unscrollable views, modal clipping, and mobile kanban glitchiness. The chatbot widget overlaps UI at z-9999.

Output: Board page scrolls correctly on all devices, modal content visible, kanban smooth on mobile, chatbot hidden, headers in French.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/board/page.tsx
@src/app/layout.tsx
@src/components/chat/global-chat-wrapper.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix board page scroll/overflow pattern and French headers</name>
  <files>src/app/board/page.tsx</files>
  <action>
  In src/app/board/page.tsx, make these exact changes:

  1. **Line 342** — Change `h-screen` to `h-full`:
     - BEFORE: `<div className='h-screen bg-background overflow-hidden'>`
     - AFTER: `<div className='h-full bg-background overflow-hidden'>`
     - WHY: Root layout uses h-dvh overflow-hidden grid. h-screen (100vh) expands beyond grid cell causing clipping. h-full fills grid cell exactly. This is the established pattern from Phase 21 (STATE.md decision).

  2. **Line 444** — Change `overflow-hidden` to `overflow-y-auto` on the main element:
     - BEFORE: `<main className='flex-1 overflow-hidden relative'>`
     - AFTER: `<main className='flex-1 overflow-y-auto relative'>`
     - WHY: The main content area needs to scroll. overflow-hidden prevents scrolling entirely. overflow-y-auto enables vertical scroll when content exceeds container.

  3. **Line 350** — Replace English "Production Board" with French:
     - BEFORE: `Production Board`
     - AFTER: `Tableau de Production`

  4. **Line 437** — Replace English "New Order" button text with French:
     - BEFORE: `<Link href='/intake'>New Order</Link>`
     - AFTER: `<Link href='/intake'>Nouvelle Commande</Link>`

  5. **Line 416** — Replace English "Workload" with French in dropdown menu:
     - BEFORE: `<span>Workload</span>`
     - AFTER: `<span>Charge de Travail</span>`

  6. **Line 422** — Replace English "Archived Orders" with French in dropdown menu:
     - BEFORE: `<span>Archived Orders</span>`
     - AFTER: `<span>Commandes Archivees</span>`

  Do NOT change any other strings (Export Orders, Export Capacity are admin-facing and can stay English). Do NOT touch the header's flex-none or any other structural classes.
  </action>
  <verify>Run `npx tsc --noEmit` to verify TypeScript compiles clean. Grep for "h-screen" in board/page.tsx to confirm none remain. Grep for "Production Board" to confirm replaced.</verify>
  <done>Board page uses h-full instead of h-screen, main area has overflow-y-auto, all 4 header strings are in French. TypeScript compiles clean.</done>
</task>

<task type="auto">
  <name>Task 2: Hide chatbot widget</name>
  <files>src/app/layout.tsx</files>
  <action>
  In src/app/layout.tsx, wrap the GlobalChatWrapper in a div that hides it on all screen sizes:

  Find line ~131:
  ```
  <GlobalChatWrapper />
  ```

  Replace with:
  ```tsx
  <div className='hidden'>
    <GlobalChatWrapper />
  </div>
  ```

  WHY using `hidden` (not `hidden md:block`): The task says "Remove from layout or hide on mobile" but the audit finding says "No floating chatbot button visible on any page." The chatbot is not wanted on any device. Using `hidden` class hides it everywhere while keeping the import and component intact for easy re-enabling later.

  Alternative approach if client later wants it on desktop: Change to `hidden md:block`.

  Do NOT remove the import statement or the component file itself — keep for potential future re-enabling.
  </action>
  <verify>Run `npx tsc --noEmit` to verify TypeScript compiles clean. Grep for "GlobalChatWrapper" in layout.tsx to confirm it's still present but wrapped in hidden div.</verify>
  <done>GlobalChatWrapper is wrapped in a hidden div, no floating chatbot button visible on any page. Component and imports preserved for future re-enabling.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. `grep -n "h-screen" src/app/board/page.tsx` returns no matches
3. `grep -n "Production Board" src/app/board/page.tsx` returns no matches
4. `grep -n "Tableau de Production" src/app/board/page.tsx` returns a match
5. `grep -n "overflow-y-auto" src/app/board/page.tsx` returns the main element
6. `grep -n "hidden" src/app/layout.tsx` shows GlobalChatWrapper wrapped in hidden div
</verification>

<success_criteria>
- Board page uses h-full pattern (matches workload page and 15 other pages fixed in Phase 21)
- Main content area scrolls vertically (overflow-y-auto)
- Modal content no longer clipped by parent overflow-hidden
- Kanban drag-and-drop no longer conflicts with parent scroll
- No floating chatbot button visible anywhere
- Board page header reads "Tableau de Production"
- Workload link reads "Charge de Travail"
- Archived link reads "Commandes Archivees"
- New Order button reads "Nouvelle Commande"
- TypeScript compiles clean
</success_criteria>

<output>
After completion, create `.planning/phases/22-audit-gap-closure/22-01-SUMMARY.md`
</output>
