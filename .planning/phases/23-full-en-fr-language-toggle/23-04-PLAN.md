---
phase: 23-full-en-fr-language-toggle
plan: 04
type: execute
wave: 2
depends_on: ["23-01", "23-02"]
files_modified:
  - src/app/booking/page.tsx
  - src/app/intake/page.tsx
  - src/components/intake/garment-services-step.tsx
  - src/components/intake/client-step.tsx
  - src/components/intake/garments-step.tsx
  - src/components/intake/pricing-step.tsx
  - src/components/intake/order-summary.tsx
  - src/components/intake/services-step-new.tsx
  - src/components/intake/assignment-step.tsx
autonomous: true

must_haves:
  truths:
    - "Booking page uses next-intl instead of inline translation object"
    - "Garment services step uses t() for categories, toast messages, and all UI labels"
    - "Client step language dropdown options are translated"
    - "Pricing step has useTranslations uncommented and all labels translated"
    - "Order summary has useTranslations uncommented and all labels translated"
    - "Assignment step 'Unassigned' label is translated"
    - "Intake wizard page step titles and descriptions use t() calls"
    - "All intake wizard steps render correctly in both EN and FR"
  artifacts:
    - path: "src/app/booking/page.tsx"
      provides: "Booking page using next-intl translations"
      contains: "useTranslations"
    - path: "src/components/intake/garment-services-step.tsx"
      provides: "Translated garment services step"
      contains: "useTranslations"
    - path: "src/components/intake/pricing-step.tsx"
      provides: "Translated pricing step (uncommented)"
      contains: "useTranslations"
    - path: "src/components/intake/order-summary.tsx"
      provides: "Translated order summary (uncommented)"
      contains: "useTranslations"
  key_links:
    - from: "src/app/booking/page.tsx"
      to: "locales/en.json"
      via: "useTranslations('booking') replaces inline translations"
      pattern: "useTranslations.*booking"
    - from: "src/components/intake/garment-services-step.tsx"
      to: "locales/en.json"
      via: "useTranslations for categories and toast"
      pattern: "t\\('(categories|intake\\.services)"
---

<objective>
Migrate all intake wizard components and the booking page from hardcoded strings to useTranslations(). This covers the booking page (remove inline translations), garment-services step (categories, toast), client step (language dropdown), garments step (categories, delete), pricing step (uncomment useTranslations), order summary (uncomment useTranslations), services-step-new, and assignment step.

Purpose: The intake wizard is the core user workflow (4+ steps). Full translation ensures seamstresses can use the entire order creation flow in their preferred language.

Output: All 8 intake/booking files use t() for every user-facing string with no inline translation objects.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-full-en-fr-language-toggle/23-RESEARCH.md
@.planning/phases/23-full-en-fr-language-toggle/23-01-SUMMARY.md
@.planning/phases/23-full-en-fr-language-toggle/23-02-SUMMARY.md

@src/app/booking/page.tsx
@src/components/intake/garment-services-step.tsx
@src/components/intake/client-step.tsx
@src/components/intake/garments-step.tsx
@src/components/intake/pricing-step.tsx
@src/components/intake/order-summary.tsx
@src/components/intake/services-step-new.tsx
@src/components/intake/assignment-step.tsx
@locales/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate booking page, intake wizard page, and garment-services step</name>
  <files>
    src/app/booking/page.tsx
    src/app/intake/page.tsx
    src/components/intake/garment-services-step.tsx
  </files>
  <action>
    **src/app/booking/page.tsx** (client component - 'use client'):

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add at top of component: `const t = useTranslations('booking');`
    3. DELETE the entire inline translations object (lines ~18-48 per research). This is the `translations = { fr: { ... }, en: { ... } }` object.
    4. Replace ALL references to `translations[locale].keyName` with `t('keyName')`
    5. Remove any local locale state management (the component should NOT track its own locale anymore — next-intl handles this globally)
    6. If the component has a language selector for switching locales, KEEP it but wire it to the global toggle mechanism (set NEXT_LOCALE cookie + router.refresh()). Or remove it if the global header toggle is sufficient.

    **src/app/intake/page.tsx** (client component - 'use client'):

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add at top of component: `const t = useTranslations('intake');` and `const tc = useTranslations('common');`
    3. Replace the hardcoded step titles and descriptions array:
       - 'Client' → `t('steps.client.title')`
       - 'Client information and contact details' → `t('steps.client.description')`
       - 'Service Type' → `t('steps.serviceType.title')`
       - 'Choose alteration or custom design' → `t('steps.serviceType.description')`
       - 'Articles' → `t('steps.articles.title')`
       - 'Add garments, services, and assign' → `t('steps.articles.description')`
       - 'Pricing & Due Date' → `t('steps.pricing.title')`
       - 'Final pricing and due date' → `t('steps.pricing.description')`
       - 'Assignment' → `t('steps.assignment.title')`
       - 'Review assignments' → `t('steps.assignment.description')`
    4. Replace error messages:
       - 'Client information is required' → `t('errors.clientRequired')`
       - 'At least one garment is required' → `t('errors.garmentRequired')`
       - 'Failed to submit order' → `t('errors.submitFailed')`
    5. Ensure corresponding keys are added in Plan 02 (locale JSON files)

    **src/components/intake/garment-services-step.tsx** (likely client component):

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add at top of component: `const t = useTranslations('intake.services');` and `const tc = useTranslations('common');` and `const tcat = useTranslations('categories');`
    3. Replace hardcoded strings:
       - Line ~580 "Chargement..." → `tc('loading')`
       - Lines ~711-718 category dropdown options (Autre, Maison, Extérieur, Femmes, Hommes, Manteaux, Formel, Sport) → use `tcat('other')`, `tcat('home')`, `tcat('outdoor')`, etc.
       - Line ~1049 "Non assigné" → `tc('none')` or use common.unassigned
       - Toast message "Article ajouté à la commande" → `t('itemAdded')`
    4. Check for any other hardcoded strings in conditional logic, placeholder attributes, aria-labels, and title attributes.
    5. For category dropdowns, if categories are rendered from an array/map, create the array dynamically inside the component using t() calls.
  </action>
  <verify>
    - `npx tsc --noEmit` compiles without errors
    - No inline translations object in booking page
    - No hardcoded "Chargement", "Autre", "Maison", or "Article ajouté" in garment-services-step
    - All 3 files import and use useTranslations
    - Run broad grep to catch ANY remaining user-facing quoted strings: `grep -rn '"[A-Z]' src/app/booking/page.tsx src/app/intake/page.tsx src/components/intake/garment-services-step.tsx | grep -v 'import\|className\|href\|data-\|console\.\|Content-Type\|application/json\|/api/\|type=\|value='` — must return zero UI string matches
  </verify>
  <done>
    Booking page uses next-intl instead of inline translations. Garment services step uses t() for all categories, loading text, toast messages, and unassigned labels.
  </done>
</task>

<task type="auto">
  <name>Task 2: Translate remaining intake components</name>
  <files>
    src/components/intake/client-step.tsx
    src/components/intake/garments-step.tsx
    src/components/intake/pricing-step.tsx
    src/components/intake/order-summary.tsx
    src/components/intake/services-step-new.tsx
    src/components/intake/assignment-step.tsx
  </files>
  <action>
    **src/components/intake/pricing-step.tsx:**

    1. UNCOMMENT the commented-out useTranslations import (line ~4 per research)
    2. Add `const t = useTranslations('intake.pricing');` at top of component
    3. Replace all hardcoded pricing labels (rush order, pricing fields, modifier labels) with t() calls
    4. Ensure all button text, section headers, and validation messages use t()

    **src/components/intake/order-summary.tsx:**

    1. UNCOMMENT the commented-out useTranslations import
    2. Add `const t = useTranslations('intake.summary');` at top of component
    3. Replace all summary field labels with t() calls
    4. Replace any hardcoded "Total", "Items", "Order Summary" text

    **src/components/intake/client-step.tsx:**

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add `const t = useTranslations('intake.client');` at top of component
    3. Replace language dropdown options:
       - Lines ~822-823: `<option value='fr'>Français</option>` and `<option value='en'>English</option>` → use t() for the display text (but keep values as 'fr'/'en')
    4. Replace any other form labels, placeholders, and validation messages with t()

    **src/components/intake/garments-step.tsx:**

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add `const t = useTranslations('intake.garments');` and `const tcat = useTranslations('categories');`
    3. Line ~685 "Delete" button → `tc('delete')` (from common namespace)
    4. Lines ~724-731 category dropdown options → use tcat() calls
    5. Replace any other hardcoded strings

    **src/components/intake/services-step-new.tsx:**

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add `const t = useTranslations('intake.services');` and `const tc = useTranslations('common');`
    3. Replace "Delete" → `tc('delete')`
    4. Replace "None" options → `tc('none')`
    5. Replace any other hardcoded strings

    **src/components/intake/assignment-step.tsx:**

    1. Add import: `import { useTranslations } from 'next-intl';`
    2. Add `const t = useTranslations('intake.assignment');`
    3. Replace "Non assigné" → `t('unassigned')`
    4. Replace any other hardcoded strings

    For EACH file, determine client vs server component and use the appropriate hook:
    - Client components: useTranslations() from 'next-intl'
    - Async server components: getTranslations() from 'next-intl/server'
  </action>
  <verify>
    - `npx tsc --noEmit` compiles without errors
    - `grep -rn '"Français"\|"English"\|"Delete"\|"None"\|"Non assigné"\|"Chargement"' src/components/intake/` returns minimal or no matches (only allowed in non-display contexts)
    - All 6 files import and use useTranslations
    - pricing-step.tsx and order-summary.tsx have uncommented useTranslations
    - Run broad grep to catch ANY remaining user-facing quoted strings in ALL modified files: `grep -rn '"[A-Z]' src/components/intake/client-step.tsx src/components/intake/garments-step.tsx src/components/intake/pricing-step.tsx src/components/intake/order-summary.tsx src/components/intake/services-step-new.tsx src/components/intake/assignment-step.tsx | grep -v 'import\|className\|href\|data-\|console\.\|Content-Type\|/api/\|type=\|value='` — must return zero UI string matches
  </verify>
  <done>
    All 6 remaining intake components use t() for every user-facing string. Pricing step and order summary have useTranslations uncommented and functional. Client step language dropdown, garments step categories, services-step-new options, and assignment step labels all translated.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. No inline translation objects remain in booking page
3. All 8 intake/booking files have useTranslations import and usage
4. grep for common hardcoded French/English strings returns 0 matches in src/components/intake/ and src/app/booking/
</verification>

<success_criteria>
- Booking page: inline translations object removed, uses next-intl
- Garment services step: categories, toast, loading text all translated
- Client step: language dropdown options translated
- Pricing step: useTranslations uncommented and used
- Order summary: useTranslations uncommented and used
- Garments step: categories and delete button translated
- Services-step-new: delete and none options translated
- Assignment step: unassigned label translated
- TypeScript compiles clean
</success_criteria>

<output>
After completion, create `.planning/phases/23-full-en-fr-language-toggle/23-04-SUMMARY.md`
</output>
