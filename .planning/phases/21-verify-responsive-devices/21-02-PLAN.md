---
phase: 21-verify-responsive-devices
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/intake/garment-services-step.tsx
  - src/components/board/order-detail-modal.tsx
autonomous: true

must_haves:
  truths:
    - "GarmentServicesStep service rows do not overflow horizontally on iPhone SE (375px)"
    - "OrderDetailModal service editing rows do not overflow horizontally on iPhone (390px)"
    - "OrderDetailModal uses responsive max-width that adapts to mobile and tablet"
  artifacts:
    - path: "src/components/intake/garment-services-step.tsx"
      provides: "Responsive service rows that stack on mobile"
      contains: "flex-col sm:flex-row"
    - path: "src/components/board/order-detail-modal.tsx"
      provides: "Mobile-adapted modal with responsive service rows"
      contains: "max-w-full sm:max-w-6xl"
  key_links:
    - from: "src/components/intake/garment-services-step.tsx"
      to: "intake flow"
      via: "service row layout"
      pattern: "flex-col|flex-wrap"
    - from: "src/components/board/order-detail-modal.tsx"
      to: "board views"
      via: "modal width and service row layout"
      pattern: "max-w-full|flex-col"
---

<objective>
Fix critical mobile overflow issues in the two most complex components: GarmentServicesStep service rows (C2) and OrderDetailModal service editing rows (C4) plus modal width (C8).

Purpose: The GarmentServicesStep service row has a minimum width of ~420px, overflowing on all iPhones (375-390px). The OrderDetailModal has similar row overflow issues plus a fixed `max-w-6xl` (1152px) with no mobile adaptation. These are the primary workflow components -- if they overflow, the entire order creation and editing flow is broken on mobile.

Output: Service rows stack vertically on mobile (flex-col) and display horizontally on desktop (sm:flex-row). OrderDetailModal uses responsive max-width.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-verify-responsive-devices/21-RESEARCH.md

@src/components/intake/garment-services-step.tsx
@src/components/board/order-detail-modal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix GarmentServicesStep service row overflow (C2)</name>
  <files>src/components/intake/garment-services-step.tsx</files>
  <action>
    Find the selected service rows (around lines 600-700) where each service displays: service name, minus button, qty, plus button, price input, time input, assignment dropdown, and remove button in a single `flex items-center gap-2` row.

    Restructure each selected service row to use a two-row mobile layout:

    ```tsx
    {/* Outer container: stack on mobile, single row on sm+ */}
    <div className="flex flex-col sm:flex-row sm:items-center gap-2 p-3 bg-white rounded-lg border">
      {/* Row 1: Service name + qty controls */}
      <div className="flex items-center gap-2 flex-1 min-w-0">
        <span className="truncate flex-1">{serviceName}</span>
        {/* minus, qty, plus buttons */}
      </div>
      {/* Row 2: Price, time, assignment, remove */}
      <div className="flex items-center gap-2 flex-wrap">
        {/* price input, time input, assignment dropdown, remove button */}
      </div>
    </div>
    ```

    Key changes:
    - Outer container: `flex flex-col sm:flex-row sm:items-center gap-2`
    - Group service name + qty controls in first child div
    - Group price + time + assignment + remove in second child div with `flex-wrap`
    - Service name gets `truncate flex-1 min-w-0` to prevent overflow
    - Keep all existing min-h-[44px] and min-w-[44px] classes on buttons
    - Keep all existing functionality (onChange handlers, values, etc.)

    WHY: The current single-row layout needs ~420px minimum. On iPhone SE (375px) and iPhone 14 (390px), this overflows. Stacking into two rows on mobile keeps everything accessible.
  </action>
  <verify>Run `npx tsc --noEmit` and confirm no TypeScript errors. Visually inspect that the flex-col/flex-row pattern is applied to the service row container.</verify>
  <done>Service rows stack vertically on mobile (< 640px) and display horizontally on sm+. No horizontal overflow on 375px viewports. TypeScript compiles clean.</done>
</task>

<task type="auto">
  <name>Task 2: Fix OrderDetailModal width and service rows (C4, C8)</name>
  <files>src/components/board/order-detail-modal.tsx</files>
  <action>
    **Fix C8 - Modal width adaptation:**
    Find the Card element that has `max-w-6xl` in its className (around line 30-40).
    Change `max-w-6xl` to `max-w-full sm:max-w-6xl` so the modal fills the screen on mobile and caps at 1152px on desktop.

    **Fix C4 - Service editing row overflow:**
    Find the service editing rows in the modal (search for service inline editing sections that display service name, qty controls, price input, time input, assignment dropdown, and action buttons in a flex row).

    Apply the same stacking pattern as Task 1:
    ```tsx
    <div className="flex flex-col sm:flex-row sm:items-center gap-2">
      <div className="flex items-center gap-2 flex-1 min-w-0">
        {/* service name + qty controls */}
      </div>
      <div className="flex items-center gap-2 flex-wrap">
        {/* price + time + assignment + actions */}
      </div>
    </div>
    ```

    Key changes:
    - Service editing rows: `flex flex-col sm:flex-row sm:items-center gap-2`
    - Group controls logically into two sub-rows
    - Add `flex-wrap` to the controls row as a fallback
    - Keep all existing editing functionality intact
    - Do NOT change the ESC key handler, backdrop click, or any modal behavior

    WHY: `max-w-6xl` (1152px) is wider than iPad portrait (768px) and iPhone, so the modal always fills 100% width on those devices with no margin. Adding `max-w-full` on mobile makes this explicit. Service rows need the same stacking treatment as GarmentServicesStep.
  </action>
  <verify>Run `npx tsc --noEmit` and confirm no TypeScript errors. Grep for `max-w-full sm:max-w-6xl` in the file to confirm the responsive max-width is applied.</verify>
  <done>OrderDetailModal uses `max-w-full sm:max-w-6xl` for responsive width. Service editing rows stack on mobile. TypeScript compiles clean.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. `grep "flex-col sm:flex-row" src/components/intake/garment-services-step.tsx` returns matches
3. `grep "max-w-full sm:max-w-6xl" src/components/board/order-detail-modal.tsx` returns a match
</verification>

<success_criteria>
- GarmentServicesStep service rows use flex-col on mobile, flex-row on sm+
- OrderDetailModal uses responsive max-width
- OrderDetailModal service editing rows stack on mobile
- No horizontal overflow at 375px viewport width in either component
- All existing functionality preserved (form handlers, editing, state)
- TypeScript compiles clean
</success_criteria>

<output>
After completion, create `.planning/phases/21-verify-responsive-devices/21-02-SUMMARY.md`
</output>
